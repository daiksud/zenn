---
title: 「変更リードタイム」を正しく理解する
emoji: ⏰
type: idea
topics: ['DevOps']
published: true
published_at: 2025-07-05
---

## はじめに

[「LeanとDevOpsの科学」](https://book.impress.co.jp/books/1118101029) という本があります。この本には、ネットでよく「Four Keys」と呼ばれている[^1]、ソフトウェアデリバリのパフォーマンスを計測する指標が紹介されています。

[^1]: ちなみに本の中にFour Keysという用語は出てきません。ただ日本ではよく使われているのでここでも「Four Keys」と呼ぶことにします。

- **デリバリのリードタイム**
- デプロイの頻度
- サービス復旧の所要時間
- 変更失敗率

Four Keysは以上の4つです（ここでは本の中の用語のまま載せました）。この記事ではこのうちの **「デリバリのリードタイム（変更リードタイム）」** について取り上げます。

というのも、この「変更リードタイム」について、インターネットを検索すると様々な解釈があるようです。なので、本家である「LeanとDevOpsの科学」で説明されている「変更リードタイム」とは何なのかを理解することで、「ぜんぜんわからない。俺たちは雰囲気でFour Keysを計測している」状態を脱出しましょう。

## 変更リードタイムとは

**「機能の開発が完了[^2]してから、本番環境にデプロイされるまでにかかる時間」** です。

[^2]: 例えばGitHubで開発している場合、ある1つの機能を実装するためのPull Requestがマージされた時点、とするのが妥当と思われます。

つまり「デリバリ」にかかったリードタイムのことです。このリードタイムは、例えば手動テストや手動デプロイがあると長くなります。

「テストは自動でやりましょう」「デプロイもワンクリック全自動でやれるようにしましょう」「そうでないとパフォーマンスが低いですよ」という話なのです。

「開発にかかった時間」は含めません。

## 「開発にかかった時間」を計測しない理由

本のp.21に以下のように書かれています。

> 製品や機能の設計と検証の所要時間に関しては、多くの場合、所要時間の計測をいつ始めるべきかが明確ではない上に、変動が非常に大きいという問題がある。

言っていることはもっともです。

**「所要時間の計測をいつ始めるべきかが明確ではない」** という点には大いに共感できます。

単純に考えるとコミット日時が思いつきますが、それだけでは実際にコミットするまでの「どうやって実装しようか」と考えていた時間が含まれません。それは不十分だと感じることがあります。

また、「どういう機能にすべきか」と機能要件を検討している時間を含めるべきだという意見や、顧客からの要望を受けた時点から計測を始めるべきだという考えもあるでしょう。

そういった点において「明確ではない」と述べているのです。

**「変動が非常に大きい」** という点についても同意できます。

コーディングにかかる時間は、機能の難易度や開発者のスキルによって大きく変わります。そのため、単純に時間を測定しても有意な評価に結びつかない可能性が高いです。

もしこれを含めてしまうと、非常に簡単なアプリ（例えばシンプルなToDoリストアプリ）を作っているチームが高評価になりやすく、必ずしもそのチームが優秀であるとは言えなくなります。

すべての機能の開発難易度が同じであれば、コーディング時間を測定することでエンジニアの優秀さを評価できるかもしれませんが、現実的にはそのような状況はあり得ません。

『LeanとDevOpsの科学』は、2,000社を超える多くの会社・チームを調査し、そのデータを分析した結果、特定のケイパビリティを持ったチームがソフトウェアデリバリのパフォーマンスが高いことを示しています。

そしてそれらのケイパビリティは、多くの会社・チームで実践可能であると説かれています。したがって、ソフトウェアの難易度やチームのエンジニアの優秀さに大きく依存する指標は、パフォーマンス評価としては適切ではありません。

以上の理由から、パフォーマンス計測に「開発にかかった時間」を含めないのです。

## 「開発にかかった時間」を計測しても意味がないのか

そこまで極端には考えません。

たとえばGitHub CopilotなどのAIを導入した場合、どの程度時間が短縮できたかを把握したいというニーズはあるはずです。そのような場合に開発時間の計測は有用な指標となり得ます。

ただし、前述のように開発対象の機能の難易度やエンジニアのスキルによって大きく左右される点は注意が必要です。これらを適切に理解しておかないと、誤った評価につながる可能性があります。

## リードタイムの解釈がバラバラなのはなぜか

これはDORAの説明が原因だと考えています。

私自身、「Four Keys」ってよく聞くけどなんだろう。Four Keysで開発生産性[^3]が計測できるらしい。Four KeysはGoogleのDORAが提唱しているらしい。それなら、正確に理解したい場合は本家の資料を参照するのが良いだろう、と考えました。

[^3]: この言葉も注意が必要。DORAの提唱するFour Keysが計測するのはあくまでもソフトウェアデリバリのパフォーマンスである。

そしてたどり着いたのが、["エリート DevOps チームであることを Four Keys プロジェクトで確認する"](https://cloud.google.com/blog/ja/products/gcp/using-the-four-keys-to-measure-your-devops-performance?hl=ja) という記事であり、以下のように説明されています。

> 変更のリードタイム - commit から本番環境稼働までの所要時間

「commitから」と書かれていますが、「commitって何？どれ？」と疑問に思うでしょう。私もそう思いました。

よく分からないため、正しい理解を求めてインターネットで検索すると、Four Keysを解説する記事の中でも「commitとはいつのことか」の解釈がまちまちで、明確に説明していない記事が多いことに気付きました。

また、「First commit」という用語[^4]もよく見かけます。おそらくこの用語に引っ張られて「最初のコミットからデプロイまでの時間」と解説している記事も見かけます。

[^4]: この「First commit」はどこからきたのか分かりません。[DORA](https://dora.dev/guides/dora-metrics-four-keys/) 本家にも [fourkeysリポジトリ](https://github.com/dora-team/fourkeys) にもそれらしいワードはありません。

DORAはトランクベース開発を前提としています。その前提では、リポジトリに行ったコミットに対して自動でデプロイフローが動き、ユニットテストや自動受け入れテストをパスすれば本番に展開されます。つまり、DORAとしては「コミットのたびにCI/CDパイプラインが実行されパスしたらすぐデプロイされる」という状態を想定しているので、「コミットから本番環境稼働までの所要時間」と表現しているのです。

しかし、多くの開発チームが採用しているであろう、featureブランチを切って何日もコミットを積み重ね、Pull Requestでレビューして、マージして、初めてデプロイフローが走る、そのような開発プロセスを採用している場合、この説明は想像がつきにくいでしょう。

この認識のズレが、リードタイムの解釈がバラバラになってしまった原因の1つなのかなと推測しています。

## まとめ

『LeanとDevOpsの科学』で紹介されている、開発組織のソフトウェアデリバリのパフォーマンスを計測する4つの指標のうち「デリバリのリードタイム」について説明しました。

『LeanとDevOpsの科学』における「デリバリのリードタイム」とは、機能の開発が完了してから本番環境にデプロイされるまでにかかる時間を指します。ここに「開発にかかった時間」は含めません。

またFour Keysは、あくまでソフトウェアデリバリのパフォーマンスを計測する指標であり、開発生産性を測定するものではないことを、忘れないようにしましょう。
